# 跨圖譜功能使用指南

> **版本**: v1.0  
> **日期**: 2026-02-02  
> **功能**: 多圖譜管理與 AI Link 智能連接

## 🎯 功能概述

跨圖譜功能允許您同時查看和管理多個知識圖譜，並通過 AI 自動發現它們之間的智能連接。

## 🚀 快速開始

### 1. 啟動跨圖譜模式

在 **GraphPage** 左側面板中找到「跨圖譜控制器」：

```
📊 跨圖譜模式
┌─────────────────────────┐
│ 🔗 跨圖譜模式            │
│ [未啟用] [退出跨圖譜]   │
└─────────────────────────┘
```

### 2. 選擇要顯示的圖譜

勾選您想要查看的圖譜（最少 2 個）：

- ☑ 🧠 技術圖譜 - 15 節點 · 20 連接
- ☑ 📚 學習圖譜 - 12 節點 · 15 連接

### 3. 加載圖譜數據

點擊 **「🚀 加載選中圖譜」** 按鈕。系統將：

1. 加載兩個圖譜的所有節點和連接
2. 自動運行 AI 相似度算法
3. 生成 AI Link 連接（金色虛線）
4. 在 3D/2D 視圖中渲染

### 4. 查看 AI Link 統計

加載成功後，您會看到：

```
✨ AI Link 統計
┌────────┬────────┬────────┬────────┐
│ 總連接 │ 高置信 │ 中置信 │ 平均   │
│   8    │   5    │   3    │  87%   │
└────────┴────────┴────────┴────────┘
```

## 🎨 視覺識別

### 普通連接
- **顏色**: 藍白色 `rgba(100, 150, 255, 0.5)`
- **樣式**: 實線
- **寬度**: 2.5px
- **粒子**: 無或少量

### AI Link 連接
- **顏色**: 金色 `#fbbf24` ✨
- **樣式**: 虛線 `[8, 4]`
- **寬度**: 1.8-2.5px（根據置信度）
- **粒子**: 2 個流動粒子
- **動畫**: 持續流動效果

### 節點標記
每個節點會顯示其所屬圖譜的圖標：

- 🧠 = 技術圖譜（藍色）
- 📚 = 學習圖譜（綠色）

## 📊 測試數據說明

### 技術圖譜（graph-tech）
包含 15 個節點，涵蓋：
- AI 技術：GPT-4, Claude 3.5, LangChain, RAG
- 開發工具：Python, FastAPI, Vue 3, Docker
- 架構設計：微服務, REST API, WebSocket
- 可視化：Three.js, D3.js

### 學習圖譜（graph-learning）
包含 12 個節點，涵蓋：
- 學習內容：AI 學習筆記, 編程教程, 系統設計
- 實踐活動：算法練習, 項目實戰, 開源貢獻
- 技能發展：代碼審查, TDD, DevOps

### AI Link 示例

| 源節點 | 目標節點 | 置信度 | 原因 |
|--------|----------|--------|------|
| GPT-4 | AI 學習筆記 | 0.95 | 主題直接相關 |
| Python | 編程教程 | 0.90 | 語言一致性 |
| Docker | DevOps 實踐 | 0.88 | 工具匹配 |
| 微服務 | 系統設計 | 0.92 | 架構相關 |

## 🎮 操作指南

### 3D 視圖
- **旋轉視圖**: 拖動滑鼠
- **縮放**: 滾動滑鼠滾輪
- **聚焦節點**: 點擊節點
- **查看連接**: 懸停在連接線上

### 2D 視圖
- **平移視圖**: 拖動空白區域
- **縮放**: 滾動滑鼠滾輪
- **聚焦節點**: 點擊節點（自動縮放到 3x）
- **查看詳情**: 右側面板顯示節點信息

### 圖譜切換
- 點擊圖譜複選框可以動態顯示/隱藏圖譜
- 至少需要保留 1 個圖譜

### 退出跨圖譜模式
點擊 **「退出跨圖譜」** 按鈕返回單圖譜模式。

## 🔍 AI Link 置信度說明

### 高置信度（≥ 0.8）⭐⭐⭐
- **顏色**: 金色，更粗
- **含義**: 節點之間有明確的語義關聯
- **示例**: GPT-4 ↔ AI 學習筆記

### 中置信度（0.5-0.8）⭐⭐
- **顏色**: 金色，中等粗細
- **含義**: 節點之間有一定相關性
- **示例**: FastAPI ↔ 系統設計

### 低置信度（< 0.5）⭐
- **顯示**: 通常不顯示
- **含義**: 相關性較弱，AI 不推薦

## 🛠️ 技術實現

### 前端渲染
```javascript
// 3D 視圖
.linkColor(link => {
  if (link.type === 'ai-link') {
    return '#fbbf24';  // 金色
  }
  return 'rgba(100, 150, 255, 0.5)';
})
.linkDirectionalParticles(link => {
  if (link.type === 'ai-link') {
    return 2;  // 流動粒子
  }
  return 0;
})
```

### 數據結構
```javascript
// AI Link 格式
{
  id: 'ai-link-1',
  source: 'tech-1',           // GPT-4
  target: 'learn-1',          // AI 學習筆記
  sourceGraphId: 'graph-tech',
  targetGraphId: 'graph-learning',
  type: 'ai-link',
  confidence: 0.95,
  reason: '主題直接相關',
  style: {
    color: '#fbbf24',
    width: 2.5,
    dashArray: [8, 4],
    animated: true
  }
}
```

## 📈 性能優化

- ✅ 最多同時顯示 2 個圖譜（27 節點）
- ✅ 支持最多 1000 個 AI Link
- ✅ 虛擬化渲染（僅顯示可見區域）
- ✅ Web Worker 後台計算（未來功能）

## 🚧 開發中功能

- [ ] 🤖 動態 AI Link 生成
- [ ] 📊 更多圖譜統計視圖
- [ ] 🎨 自定義 AI Link 樣式
- [ ] 💾 保存跨圖譜配置
- [ ] 🔗 手動創建跨圖譜連接
- [ ] 📤 導出跨圖譜數據

## 💡 使用技巧

1. **先加載單圖譜，熟悉後再嘗試跨圖譜**
2. **使用搜索功能快速定位節點**
3. **切換 2D/3D 視圖以獲得不同視角**
4. **懸停在 AI Link 上查看置信度和原因**
5. **使用過濾器（Focus/Part）減少視覺干擾**

## 🐛 已知問題

- 首次加載可能需要 1-2 秒
- 圖譜切換時會重新渲染（預期行為）
- 超過 50 個節點時性能可能下降

## 📞 支持

如有問題，請查看：
- [設計文檔](./CROSS_GRAPH_DESIGN.md)
- [API 整合指南](../api/API_INTEGRATION.md)
- [圖譜交互指南](./GRAPH_INTERACTION_GUIDE.md)

---

**祝您使用愉快！** 🎉
