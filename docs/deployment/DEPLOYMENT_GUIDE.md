# BruV Project æ‰“åŒ…èˆ‡éƒ¨ç½²å®Œæ•´æŒ‡å—

## ğŸ“¦ é …ç›®æ¦‚è¿°

BruV Project æ˜¯ä¸€å€‹æ•´åˆ FastAPI å¾Œç«¯ã€Vue 3 å‰ç«¯å’Œ Docker (Dify + RAGFlow) çš„ä¼æ¥­ç´š AI å¹³å°ã€‚æœ¬æŒ‡å—å°‡å¹«åŠ©ä½ å°‡é …ç›®æ‰“åŒ…ä¸¦éƒ¨ç½²åˆ°å…¨æ–°çš„ Windows é›»è…¦ä¸Šã€‚

---

## ğŸ¯ éƒ¨ç½²æµç¨‹ç¸½è¦½

```
åŸé›»è…¦                          æ–°é›»è…¦
â”€â”€â”€â”€â”€â”€â”€                         â”€â”€â”€â”€â”€â”€â”€
1. åŸ·è¡Œ pack_project.py    â†’   2. è§£å£“ BruV_Installer.zip
   (ç”Ÿæˆå£“ç¸®åŒ…)                   (åˆ°ç›®æ¨™ç›®éŒ„)
                           â†’   3. åŸ·è¡Œ setup_windows.bat
                                  (ä¸€éµå®‰è£é…ç½®)
                           â†’   4. é…ç½® API Keys
                                  (ç·¨è¼¯ .env)
                           â†’   5. å•Ÿå‹•æœå‹™
                                  (python launcher.py)
```

---

## ğŸ“‹ æª”æ¡ˆæ¸…å–®

æœ¬æ¬¡å‰µå»ºçš„é—œéµæ–‡ä»¶ï¼š

| æª”æ¡ˆ | ç”¨é€” | ä½ç½® |
|------|------|------|
| `requirements.txt` | Python ä¾è³´æ¸…å–® | é …ç›®æ ¹ç›®éŒ„ |
| `pack_project.py` | æ‰“åŒ…è…³æœ¬ | é …ç›®æ ¹ç›®éŒ„ |
| `setup_windows.bat` | Windows å®‰è£è…³æœ¬ | é …ç›®æ ¹ç›®éŒ„ |
| `.env.example` | ç’°å¢ƒè®Šæ•¸ç¯„ä¾‹ | é …ç›®æ ¹ç›®éŒ„ |

---

## ğŸ”§ åŸé›»è…¦æ“ä½œï¼šæ‰“åŒ…é …ç›®

### æ­¥é©Ÿ 1: æª¢æŸ¥æ–‡ä»¶

ç¢ºèªé …ç›®æ ¹ç›®éŒ„åŒ…å«ä»¥ä¸‹æ–‡ä»¶ï¼š

```
BruV_Project/
â”œâ”€â”€ app_anytype.py
â”œâ”€â”€ launcher.py
â”œâ”€â”€ requirements.txt          âœ… å·²å‰µå»º
â”œâ”€â”€ pack_project.py           âœ… å·²å‰µå»º
â”œâ”€â”€ setup_windows.bat         âœ… å·²å‰µå»º
â”œâ”€â”€ .env.example              âœ… å·²å­˜åœ¨
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ backend/
â”œâ”€â”€ frontend/
â””â”€â”€ ...
```

### æ­¥é©Ÿ 2: åŸ·è¡Œæ‰“åŒ…è…³æœ¬

```powershell
# åœ¨é …ç›®æ ¹ç›®éŒ„åŸ·è¡Œ
python pack_project.py
```

**æ‰“åŒ…éç¨‹ï¼š**
```
ğŸš€ BruV Project æ‰“åŒ…å·¥å…·
============================================================
ğŸ“‚ æºç›®éŒ„: C:\...\BruV_Project
ğŸ“¦ è¼¸å‡ºæ–‡ä»¶: C:\...\BruV_Installer_20260131_143025.zip

ğŸ“Š åˆ†æé …ç›®å¤§å°...
   åŸå§‹å¤§å°: 1.2 GB
   éæ¿¾å¾Œå¤§å°: 45.6 MB
   ç¯€çœç©ºé–“: 1.15 GB

âš ï¸  å°‡æ’é™¤ä»¥ä¸‹å…§å®¹:
   - .venv
   - node_modules
   - __pycache__
   - .git
   - *.log
   ... å’Œå…¶ä»– 10 å€‹æ¨¡å¼

æ˜¯å¦ç¹¼çºŒæ‰“åŒ…? (y/N): y

ğŸ“¦ é–‹å§‹æ‰“åŒ…...
   å·²æ·»åŠ  50 å€‹æ–‡ä»¶...
   å·²æ·»åŠ  100 å€‹æ–‡ä»¶...
   å·²æ·»åŠ  150 å€‹æ–‡ä»¶...

============================================================
âœ… æ‰“åŒ…å®Œæˆï¼
============================================================
ğŸ“¦ è¼¸å‡ºæ–‡ä»¶: BruV_Installer_20260131_143025.zip
ğŸ“Š æ–‡ä»¶æ•¸é‡: 187
ğŸ’¾ ZIP å¤§å°: 12.3 MB
ğŸ“ˆ å£“ç¸®ç‡: 73.0%
```

### æ­¥é©Ÿ 3: è½‰ç§»å£“ç¸®åŒ…

å°‡ç”Ÿæˆçš„ `BruV_Installer_YYYYMMDD_HHMMSS.zip` è¤‡è£½åˆ°æ–°é›»è…¦ï¼ˆé€šé USBã€ç¶²ç›¤ç­‰æ–¹å¼ï¼‰ã€‚

---

## ğŸ–¥ï¸ æ–°é›»è…¦æ“ä½œï¼šå®‰è£éƒ¨ç½²

### å‰ç½®æ¢ä»¶

æ–°é›»è…¦éœ€è¦é å…ˆå®‰è£ï¼š

1. **Python 3.11+**
   - ä¸‹è¼‰: https://www.python.org/downloads/
   - âš ï¸ å®‰è£æ™‚å‹™å¿…å‹¾é¸ **"Add Python to PATH"**

2. **Docker Desktop**
   - ä¸‹è¼‰: https://www.docker.com/products/docker-desktop/
   - å®‰è£å¾Œéœ€è¦å•Ÿå‹• Docker Desktop

3. **Node.js (LTS)**
   - ä¸‹è¼‰: https://nodejs.org/
   - æœƒè‡ªå‹•å®‰è£ npm

### æ­¥é©Ÿ 1: è§£å£“é …ç›®

```powershell
# è§£å£“åˆ°ä»»æ„ç›®éŒ„ï¼Œä¾‹å¦‚:
# C:\Projects\BruV_Project

# æˆ–ä½¿ç”¨ PowerShell è§£å£“:
Expand-Archive -Path BruV_Installer_20260131_143025.zip -DestinationPath C:\Projects\BruV_Project
```

### æ­¥é©Ÿ 2: åŸ·è¡Œå®‰è£è…³æœ¬

**é‡è¦ï¼šå¿…é ˆä»¥ç®¡ç†å“¡èº«ä»½åŸ·è¡Œï¼**

```powershell
# æ–¹æ³• 1: å³éµé»æ“Š setup_windows.bat
å³éµ -> ä»¥ç³»çµ±ç®¡ç†å“¡èº«åˆ†åŸ·è¡Œ

# æ–¹æ³• 2: åœ¨ç®¡ç†å“¡ PowerShell ä¸­åŸ·è¡Œ
cd C:\Projects\BruV_Project
.\setup_windows.bat
```

**å®‰è£éç¨‹ï¼š**

```
============================================================
ğŸš€ BruV Project - Windows ä¸€éµå®‰è£
============================================================

[1/10] æª¢æŸ¥ç®¡ç†å“¡æ¬Šé™...
âœ… å·²ç¢ºèªç®¡ç†å“¡æ¬Šé™

[2/10] æª¢æŸ¥ Python å®‰è£...
âœ… Python ç‰ˆæœ¬: 3.11.5

[3/10] æª¢æŸ¥ Docker å®‰è£...
âœ… Docker ç‰ˆæœ¬: 24.0.6

[4/10] æª¢æŸ¥ Node.js / npm...
âœ… Node.js ç‰ˆæœ¬: v20.10.0
âœ… npm ç‰ˆæœ¬: 10.2.3

[5/10] å‰µå»º Python è™›æ“¬ç’°å¢ƒ...
âœ… è™›æ“¬ç’°å¢ƒå‰µå»ºæˆåŠŸ

[6/10] å®‰è£ Python ä¾è³´...
æ­£åœ¨å®‰è£ä¾è³´ï¼Œè«‹ç¨å€™...
âœ… Python ä¾è³´å®‰è£å®Œæˆ

[7/10] å®‰è£å‰ç«¯ä¾è³´...
æ­£åœ¨å®‰è£å‰ç«¯ä¾è³´ï¼Œé€™å¯èƒ½éœ€è¦å¹¾åˆ†é˜...
âœ… å‰ç«¯ä¾è³´å®‰è£å®Œæˆ

[8/10] é…ç½®ç’°å¢ƒè®Šæ•¸ (.env)...
âœ… å·²å¾ .env.example å‰µå»º .env
âš ï¸  è«‹ç·¨è¼¯ .env æ–‡ä»¶ï¼Œå¡«å…¥å¯¦éš›çš„ API Keys

[9/10] é æ‹‰å– Docker æ˜ åƒ...
é€™å¯èƒ½éœ€è¦è¼ƒé•·æ™‚é–“ï¼Œå–æ±ºæ–¼æ‚¨çš„ç¶²è·¯é€Ÿåº¦...
âœ… Docker æ˜ åƒæ‹‰å–å®Œæˆ

[10/10] æœ€å¾Œæª¢æŸ¥...

============================================================
âœ… å®‰è£å®Œæˆï¼
============================================================
```

### æ­¥é©Ÿ 3: é…ç½® API Keys

ç·¨è¼¯ `.env` æ–‡ä»¶ï¼š

```powershell
notepad .env
```

**å¿…é ˆä¿®æ”¹çš„è®Šæ•¸ï¼š**

```env
# å¾ Dify Web UI ç²å– (http://localhost:80)
DIFY_API_KEY=app-your-actual-key-here

# å¾ RAGFlow Web UI ç²å– (http://localhost:9380)
RAGFLOW_API_KEY=ragflow-your-actual-key-here
```

**ç²å– API Keys çš„æ­¥é©Ÿï¼š**

**Dify API Key:**
1. å•Ÿå‹• Docker: `docker compose up -d`
2. è¨ªå• http://localhost:80
3. è¨»å†Š/ç™»å…¥å¸³è™Ÿ
4. å‰µå»ºæ–°æ‡‰ç”¨
5. é€²å…¥æ‡‰ç”¨ â†’ API è¨ªå• â†’ å‰µå»ºå¯†é‘°
6. è¤‡è£½ Key ä¸¦å¡«å…¥ `.env`

**RAGFlow API Key:**
1. è¨ªå• http://localhost:9380
2. è¨»å†Š/ç™»å…¥
3. è¨­å®š â†’ API Keys â†’ å‰µå»ºå¯†é‘°
4. è¤‡è£½ Key ä¸¦å¡«å…¥ `.env`

### æ­¥é©Ÿ 4: å•Ÿå‹•æœå‹™

```powershell
# å•Ÿå‹• Docker æœå‹™ï¼ˆå¦‚æœå°šæœªå•Ÿå‹•ï¼‰
docker compose up -d

# ç­‰å¾… 2-3 åˆ†é˜è®“æœå‹™å®Œå…¨å•Ÿå‹•

# å•Ÿå‹• Python å¾Œç«¯ + å‰ç«¯
python launcher.py
```

**é æœŸè¼¸å‡ºï¼š**

```
============================================================
ğŸ¯ BruV_Project é–‹ç™¼ç’°å¢ƒå•Ÿå‹•å™¨
============================================================
ğŸ” æª¢æŸ¥é‹è¡Œç’°å¢ƒ...
âœ… ä¾è³´æª¢æŸ¥å®Œæˆ
ğŸ³ æª¢æŸ¥ Docker æœå‹™...
âœ… Docker æœå‹™é‹è¡Œä¸­
ğŸ” æª¢æŸ¥ Node.js ç’°å¢ƒ...
âœ… å‰ç«¯ä¾è³´å·²å®‰è£

============================================================
âœ¨ å•Ÿå‹•é–‹ç™¼ç’°å¢ƒ...
============================================================
ğŸš€ å•Ÿå‹• FastAPI å¾Œç«¯æœå‹™...
âœ… å¾Œç«¯æœå‹™å·²å•Ÿå‹• (PID: 12345)
ğŸ¨ å•Ÿå‹•å‰ç«¯é–‹ç™¼ä¼ºæœå™¨...
âœ… å‰ç«¯æœå‹™å·²å•Ÿå‹• (PID: 67890)

============================================================
ğŸ‰ é–‹ç™¼ç’°å¢ƒå·²å°±ç·’ï¼
============================================================
ğŸ”Œ Backend:  http://localhost:8000
ğŸ“– API Docs: http://localhost:8000/docs
ğŸ¨ Frontend: http://localhost:5173
============================================================
ğŸ’¡ æŒ‰ Ctrl+C åœæ­¢æ‰€æœ‰æœå‹™
============================================================
```

### æ­¥é©Ÿ 5: è¨ªå•æ‡‰ç”¨

åœ¨ç€è¦½å™¨ä¸­æ‰“é–‹ï¼š

- **å‰ç«¯æ‡‰ç”¨**: http://localhost:5173
- **å¾Œç«¯ API**: http://localhost:8000
- **API æ–‡æª”**: http://localhost:8000/docs
- **Dify Web**: http://localhost:80
- **RAGFlow**: http://localhost:9380

---

## ğŸ¯ å¿«é€Ÿæª¢æŸ¥æ¸…å–®

### æ‰“åŒ…å‰ï¼ˆåŸé›»è…¦ï¼‰

- [ ] ç¢ºèª `requirements.txt` å­˜åœ¨
- [ ] ç¢ºèª `pack_project.py` å­˜åœ¨
- [ ] ç¢ºèª `setup_windows.bat` å­˜åœ¨
- [ ] ç¢ºèª `.env.example` å­˜åœ¨
- [ ] åŸ·è¡Œ `python pack_project.py`
- [ ] ç¢ºèªç”Ÿæˆ `BruV_Installer_*.zip`

### å®‰è£å‰ï¼ˆæ–°é›»è…¦ï¼‰

- [ ] å®‰è£ Python 3.11+ï¼ˆå‹¾é¸ Add to PATHï¼‰
- [ ] å®‰è£ Docker Desktopï¼ˆä¸¦å•Ÿå‹•ï¼‰
- [ ] å®‰è£ Node.js (LTS)
- [ ] è§£å£“ `BruV_Installer_*.zip`

### å®‰è£å¾Œï¼ˆæ–°é›»è…¦ï¼‰

- [ ] ä»¥ç®¡ç†å“¡èº«ä»½åŸ·è¡Œ `setup_windows.bat`
- [ ] æ‰€æœ‰ 10 å€‹æ­¥é©Ÿéƒ½é¡¯ç¤º âœ…
- [ ] ç·¨è¼¯ `.env` å¡«å…¥ API Keys
- [ ] åŸ·è¡Œ `docker compose up -d`
- [ ] åŸ·è¡Œ `python launcher.py`
- [ ] è¨ªå• http://localhost:5173

---

## ğŸ› æ•…éšœæ’æŸ¥

### å•é¡Œ 1: setup_windows.bat å ±éŒ¯ "è«‹ä»¥ç®¡ç†å“¡èº«ä»½åŸ·è¡Œ"

**åŸå› **: è…³æœ¬éœ€è¦ç®¡ç†å“¡æ¬Šé™ä¾†æª¢æŸ¥ç³»çµ±ç‹€æ…‹

**è§£æ±º**:
```
å³éµé»æ“Š setup_windows.bat -> ä»¥ç³»çµ±ç®¡ç†å“¡èº«åˆ†åŸ·è¡Œ
```

### å•é¡Œ 2: Python ä¾è³´å®‰è£å¤±æ•—

**åŸå› **: å¯èƒ½æ˜¯ç¶²çµ¡å•é¡Œæˆ– Python ç‰ˆæœ¬ä¸å…¼å®¹

**è§£æ±º**:
```powershell
# ä½¿ç”¨åœ‹å…§é¡åƒæº
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple

# æˆ–ä½¿ç”¨é˜¿é‡Œé›²é¡åƒ
pip install -r requirements.txt -i https://mirrors.aliyun.com/pypi/simple/
```

### å•é¡Œ 3: KuzuDB å®‰è£å¤±æ•—

**åŸå› **: KuzuDB åœ¨ Windows ä¸Šå¯èƒ½æœ‰ç·¨ç¢¼å•é¡Œ

**è§£æ±º**: ç„¡éœ€æ“”å¿ƒï¼Œç¨‹åºæœƒè‡ªå‹•ä½¿ç”¨ MockKuzuManager ä½œç‚ºå¾Œå‚™æ–¹æ¡ˆ

### å•é¡Œ 4: Docker æ˜ åƒæ‹‰å–å¤±æ•—

**åŸå› **: ç¶²çµ¡å•é¡Œæˆ– Docker Hub è¨ªå•å—é™

**è§£æ±º**:
```powershell
# é…ç½® Docker ä½¿ç”¨åœ‹å…§é¡åƒæº
# ç·¨è¼¯ Docker Desktop -> Settings -> Docker Engine
# æ·»åŠ ä»¥ä¸‹å…§å®¹åˆ° JSON é…ç½®:
{
  "registry-mirrors": [
    "https://docker.mirrors.ustc.edu.cn",
    "https://hub-mirror.c.163.com"
  ]
}

# é‡å•Ÿ Docker Desktop
# é‡æ–°åŸ·è¡Œ: docker compose pull
```

### å•é¡Œ 5: ç«¯å£è¢«ä½”ç”¨

**æª¢æŸ¥ç«¯å£ä½¿ç”¨æƒ…æ³**:
```powershell
# æª¢æŸ¥ 8000 ç«¯å£ï¼ˆå¾Œç«¯ï¼‰
netstat -ano | findstr :8000

# æª¢æŸ¥ 5173 ç«¯å£ï¼ˆå‰ç«¯ï¼‰
netstat -ano | findstr :5173

# æª¢æŸ¥ 80 ç«¯å£ï¼ˆDifyï¼‰
netstat -ano | findstr :80

# çµ‚æ­¢ä½”ç”¨ç«¯å£çš„é€²ç¨‹
taskkill /PID <PID> /F
```

### å•é¡Œ 6: å‰ç«¯ç„¡æ³•é€£æ¥å¾Œç«¯

**æª¢æŸ¥ CORS è¨­ç½®**:
```python
# ç¢ºèª app_anytype.py ä¸­çš„ CORS è¨­ç½®
app.add_middleware(
    CORSMiddleware,
    allow_origins=["*"],  # é–‹ç™¼ç’°å¢ƒå…è¨±æ‰€æœ‰ä¾†æº
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)
```

---

## ğŸ“Š é …ç›®çµæ§‹

å®‰è£å®Œæˆå¾Œçš„ç›®éŒ„çµæ§‹ï¼š

```
BruV_Project/
â”œâ”€â”€ .venv/                    # Python è™›æ“¬ç’°å¢ƒ (è‡ªå‹•å‰µå»º)
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ node_modules/         # å‰ç«¯ä¾è³´ (è‡ªå‹•å®‰è£)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ views/
â”‚   â”‚   â”‚   â”œâ”€â”€ DifyChat.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ Settings.vue
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ router/
â”‚   â”‚   â””â”€â”€ App.vue
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ dify.py
â”‚   â”‚   â”œâ”€â”€ system.py
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ core/
â”œâ”€â”€ app_anytype.py            # FastAPI ä¸»ç¨‹åº
â”œâ”€â”€ launcher.py               # å•Ÿå‹•å™¨
â”œâ”€â”€ requirements.txt          # Python ä¾è³´
â”œâ”€â”€ pack_project.py           # æ‰“åŒ…è…³æœ¬
â”œâ”€â”€ setup_windows.bat         # å®‰è£è…³æœ¬
â”œâ”€â”€ .env                      # ç’°å¢ƒè®Šæ•¸ (è‡ªå‹•ç”Ÿæˆ)
â”œâ”€â”€ .env.example              # ç’°å¢ƒè®Šæ•¸ç¯„ä¾‹
â””â”€â”€ docker-compose.yml        # Docker é…ç½®
```

---

## ğŸ”’ å®‰å…¨å»ºè­°

### ç”Ÿç”¢ç’°å¢ƒéƒ¨ç½²

å¦‚æœè¦éƒ¨ç½²åˆ°ç”Ÿç”¢ç’°å¢ƒï¼Œè«‹æ³¨æ„ï¼š

1. **ä¿®æ”¹é è¨­å¯†ç¢¼**
   ```env
   DIFY_DB_PASSWORD=your_strong_password_here
   RAGFLOW_MYSQL_PASSWORD=your_strong_password_here
   MINIO_PASSWORD=your_strong_password_here
   ```

2. **ç¦ç”¨èª¿è©¦æ¨¡å¼**
   ```env
   DEBUG=False
   ```

3. **è¨­ç½®é˜²ç«ç‰†**
   - åªé–‹æ”¾å¿…è¦çš„ç«¯å£
   - ä½¿ç”¨åå‘ä»£ç†ï¼ˆNginxï¼‰

4. **ä½¿ç”¨ HTTPS**
   - é…ç½® SSL è­‰æ›¸
   - å¼·åˆ¶ HTTPS é‡å®šå‘

5. **å®šæœŸå‚™ä»½**
   - å‚™ä»½ `.env` æ–‡ä»¶
   - å‚™ä»½ Docker æ•¸æ“šå·
   - å‚™ä»½ KuzuDB æ•¸æ“š

---

## ğŸ“š ç›¸é—œæ–‡æª”

- **[DOCKER_SETUP.md](./DOCKER_SETUP.md)** - Docker æœå‹™é…ç½®æŒ‡å—
- **[SYSTEM_API_GUIDE.md](./SYSTEM_API_GUIDE.md)** - ç³»çµ± API ä½¿ç”¨æŒ‡å—
- **[SETTINGS_PAGE_TEST.md](./SETTINGS_PAGE_TEST.md)** - è¨­å®šé é¢æ¸¬è©¦æŒ‡å—

---

## â“ éœ€è¦å¹«åŠ©ï¼Ÿ

å¦‚æœé‡åˆ°å…¶ä»–å•é¡Œï¼š

1. æŸ¥çœ‹å¾Œç«¯æ—¥èªŒï¼šæª¢æŸ¥ launcher.py çš„çµ‚ç«¯è¼¸å‡º
2. æŸ¥çœ‹ Docker æ—¥èªŒï¼š`docker compose logs -f`
3. æŸ¥çœ‹ç€è¦½å™¨ Consoleï¼šF12 é–‹ç™¼è€…å·¥å…·
4. æª¢æŸ¥ API æ–‡æª”ï¼šhttp://localhost:8000/docs

---

**éƒ¨ç½²æˆåŠŸå¾Œï¼Œäº«å—ä½ çš„ BruV Projectï¼** ğŸ‰
