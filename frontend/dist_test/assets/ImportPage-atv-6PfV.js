import { j as onMounted, y as openBlock, D as createElementBlock, az as createStaticVNode, G as createBaseVNode, S as createTextVNode, I as normalizeClass, $ as withModifiers, U as toDisplayString, R as createCommentVNode, M as Fragment, a6 as renderList, P as withDirectives, aG as vModelSelect, u as unref, H as normalizeStyle, an as vModelText, r as ref } from "./vue-vendor-rpbpBucb.js";
import { _ as _export_sfc, u as useGraphStore } from "./index-DDdIzyMR.js";
import { E as ElMessage } from "./element-plus-DavumCtP.js";
const _hoisted_1 = { class: "h-screen overflow-y-auto bg-[#0a0e27] px-6 py-8 custom-scrollbar" };
const _hoisted_2 = { class: "max-w-5xl mx-auto pb-8" };
const _hoisted_3 = { class: "bg-[#1a1d3a] border-2 border-[#2d3154] rounded-3xl shadow-xl" };
const _hoisted_4 = { class: "p-8" };
const _hoisted_5 = { class: "text-center" };
const _hoisted_6 = { class: "mb-4" };
const _hoisted_7 = { class: "text-7xl animate-bounce inline-block" };
const _hoisted_8 = { class: "text-2xl font-bold text-gray-300 mb-2" };
const _hoisted_9 = { class: "text-base text-gray-400 mb-4" };
const _hoisted_10 = {
  key: 0,
  class: "flex justify-center gap-3 flex-wrap"
};
const _hoisted_11 = {
  key: 0,
  class: "mt-8"
};
const _hoisted_12 = { class: "text-xl font-bold text-white mb-4 flex items-center gap-2" };
const _hoisted_13 = { class: "space-y-3" };
const _hoisted_14 = { class: "flex items-center gap-3 flex-1" };
const _hoisted_15 = { class: "text-3xl" };
const _hoisted_16 = { class: "flex-1" };
const _hoisted_17 = { class: "font-semibold text-white" };
const _hoisted_18 = { class: "text-sm text-gray-400" };
const _hoisted_19 = ["onClick"];
const _hoisted_20 = { class: "mt-6 p-6 bg-white/5 border-2 border-[#2d3154] rounded-xl" };
const _hoisted_21 = { class: "flex gap-4 mb-4" };
const _hoisted_22 = {
  key: 0,
  class: "mt-4"
};
const _hoisted_23 = { class: "p-4 bg-blue-900/20 border-2 border-blue-500/50 rounded-xl" };
const _hoisted_24 = { class: "flex items-center justify-between" };
const _hoisted_25 = { class: "flex items-center gap-3" };
const _hoisted_26 = { class: "text-3xl" };
const _hoisted_27 = { class: "font-bold text-blue-300" };
const _hoisted_28 = {
  key: 1,
  class: "mt-4"
};
const _hoisted_29 = ["value"];
const _hoisted_30 = { class: "mt-6 pt-6 border-t-2 border-[#2d3154]" };
const _hoisted_31 = { class: "flex items-center justify-between p-4 bg-gradient-to-r from-emerald-900/20 to-teal-900/20 border-2 border-emerald-500/50 rounded-xl" };
const _hoisted_32 = {
  key: 0,
  class: "mt-3 text-sm text-emerald-400 flex items-start gap-2"
};
const _hoisted_33 = {
  key: 1,
  class: "mt-3 text-sm text-gray-400 flex items-start gap-2"
};
const _hoisted_34 = {
  key: 2,
  class: "mt-4 p-4 bg-purple-900/20 rounded-lg border-2 border-purple-700"
};
const _hoisted_35 = ["value"];
const _hoisted_36 = { class: "mt-6 flex gap-4" };
const _hoisted_37 = ["disabled"];
const _hoisted_38 = { key: 0 };
const _hoisted_39 = { key: 1 };
const _hoisted_40 = ["disabled"];
const _hoisted_41 = {
  key: 1,
  class: "mt-6"
};
const _hoisted_42 = { class: "bg-gray-700 rounded-full h-4 overflow-hidden" };
const _hoisted_43 = { class: "mt-3 space-y-2" };
const _hoisted_44 = { class: "text-center text-base font-bold text-gray-300" };
const _hoisted_45 = {
  key: 0,
  class: "flex items-center justify-center gap-2 text-sm text-blue-400"
};
const _hoisted_46 = { class: "font-semibold" };
const _hoisted_47 = {
  key: 1,
  class: "text-center text-xs text-gray-400"
};
const _hoisted_48 = {
  key: 0,
  class: "mt-8"
};
const _hoisted_49 = { class: "bg-[#1a1d3a] border-2 border-[#2d3154] rounded-3xl shadow-xl overflow-hidden" };
const _hoisted_50 = { class: "p-6 space-y-3" };
const _hoisted_51 = { class: "flex items-start gap-3" };
const _hoisted_52 = { class: "text-2xl" };
const _hoisted_53 = { class: "flex-1" };
const _hoisted_54 = {
  key: 0,
  class: "text-xs text-gray-400 mt-1"
};
const _hoisted_55 = {
  key: 1,
  class: "mt-3 space-y-2"
};
const _hoisted_56 = { class: "bg-gray-700 rounded-full h-2 overflow-hidden" };
const _hoisted_57 = { class: "flex items-center gap-2 text-xs" };
const _hoisted_58 = { class: "text-gray-300 font-medium" };
const _hoisted_59 = { class: "pl-6 space-y-1 text-xs text-gray-400" };
const _hoisted_60 = { class: "flex items-center gap-2" };
const _hoisted_61 = { class: "flex items-center gap-2" };
const _hoisted_62 = { class: "flex items-center gap-2" };
const _hoisted_63 = { class: "bg-[#1a1d3a] border-2 border-[#2d3154] rounded-3xl shadow-2xl max-w-2xl w-full mx-4 p-8" };
const _hoisted_64 = { class: "flex items-center justify-between mb-6" };
const _hoisted_65 = { class: "text-3xl font-bold text-white flex items-center gap-3" };
const _hoisted_66 = { class: "space-y-6" };
const _hoisted_67 = { class: "grid grid-cols-8 gap-3" };
const _hoisted_68 = ["onClick"];
const _hoisted_69 = { class: "flex gap-4 pt-4" };
const _hoisted_70 = ["disabled"];
const _hoisted_71 = { key: 0 };
const _hoisted_72 = { key: 1 };
const _hoisted_73 = ["disabled"];
const _sfc_main = {
  __name: "ImportPage",
  setup(__props) {
    const graphStore = useGraphStore();
    const isDragging = ref(false);
    const files = ref([]);
    const uploadStatus = ref("ready");
    const uploadedCount = ref(0);
    const uploadProgress = ref(0);
    const uploadResults = ref([]);
    const currentProcessingFile = ref("");
    const processingStage = ref("");
    const importMode = ref("new");
    const graphName = ref("");
    const selectedGraphId = ref("");
    const enableAILink = ref(true);
    const selectedDatasetId = ref("");
    const ragflowDatasets = ref([]);
    const fileInput = ref(null);
    const showCreateGraphDialog = ref(false);
    const isCreatingGraph = ref(false);
    const newGraphData = ref({
      name: "",
      description: "",
      icon: "ğŸŒ",
      color: "#3b82f6"
    });
    const availableIcons = [
      "ğŸŒ",
      "ğŸ§ ",
      "ğŸ“š",
      "ğŸ’¼",
      "ğŸ”¬",
      "ğŸ¯",
      "ğŸ“Š",
      "ğŸ—‚ï¸",
      "ğŸ’¡",
      "ğŸš€",
      "ğŸ¨",
      "ğŸ“",
      "ğŸ”§",
      "âš¡",
      "ğŸŒŸ",
      "ğŸ“±"
    ];
    const getStatusText = () => {
      switch (uploadStatus.value) {
        case "ready":
          return isDragging.value ? "æ”¾é–‹ä»¥ä¸Šå‚³" : "å°‡æª”æ¡ˆæ‹–æ”¾åˆ°æ­¤è™•æˆ–é»æ“Šä¸Šå‚³";
        case "uploading":
          return "ä¸Šå‚³ä¸­...";
        case "completed":
          return "âœ… å·²é€²å…¥æ’ç¨‹";
        default:
          return "æº–å‚™ä¸­...";
      }
    };
    const getStatusSubtext = () => {
      switch (uploadStatus.value) {
        case "ready":
          return "æ”¯æ´å¤šæª”æ¡ˆé¸å–";
        case "uploading":
          return "è«‹ç¨å€™ï¼Œæ­£åœ¨è™•ç†æª”æ¡ˆ...";
        case "completed":
          return "æª”æ¡ˆå·²é€å…¥ç¥ç¶“ç¶²è·¯ï¼Œæ­£åœ¨è§£æä¸­...";
        default:
          return "";
      }
    };
    const triggerFileInput = () => {
      if (uploadStatus.value === "uploading") return;
      fileInput.value.click();
    };
    const handleFileSelect = (event) => {
      const selectedFiles = Array.from(event.target.files);
      addFiles(selectedFiles);
    };
    const handleDrop = (event) => {
      isDragging.value = false;
      const droppedFiles = Array.from(event.dataTransfer.files);
      addFiles(droppedFiles);
    };
    const addFiles = (newFiles) => {
      const existingNames = files.value.map((f) => f.name);
      const uniqueFiles = newFiles.filter((f) => !existingNames.includes(f.name));
      files.value.push(...uniqueFiles);
      uploadStatus.value = "ready";
      uploadResults.value = [];
    };
    const removeFile = (index) => {
      files.value.splice(index, 1);
    };
    const clearFiles = () => {
      files.value = [];
      uploadResults.value = [];
      uploadStatus.value = "ready";
    };
    const uploadFiles = async () => {
      if (files.value.length === 0 || uploadStatus.value === "uploading") return;
      if (importMode.value === "new" && !graphName.value.trim()) {
        ElMessage.warning("âš ï¸ è«‹å…ˆå»ºç«‹æ–°åœ–è­œ");
        showCreateGraphDialog.value = true;
        return;
      }
      if (importMode.value === "existing" && !selectedGraphId.value) {
        ElMessage.warning("âš ï¸ è«‹é¸æ“‡è¦åŠ å…¥çš„åœ–è­œ");
        return;
      }
      uploadStatus.value = "uploading";
      uploadedCount.value = 0;
      uploadProgress.value = 0;
      uploadResults.value = [];
      try {
        console.log("ğŸ“¡ [ImportPage] é–‹å§‹ä¸Šå‚³æª”æ¡ˆ...", {
          count: files.value.length,
          mode: importMode.value,
          graphName: graphName.value,
          graphId: selectedGraphId.value
        });
        for (let i = 0; i < files.value.length; i++) {
          const file = files.value[i];
          currentProcessingFile.value = file.name;
          processingStage.value = "ğŸ“¤ æ­£åœ¨ä¸Šå‚³æª”æ¡ˆåˆ°ä¼ºæœå™¨...";
          try {
            const formData = new FormData();
            formData.append("file", file);
            if (importMode.value === "new") {
              formData.append("graph_mode", "new");
              formData.append("graph_name", graphName.value.trim());
              console.log("ğŸš€ ä¸Šå‚³æª”æ¡ˆè‡³æ–°åœ–è­œ:", graphName.value.trim());
            } else {
              formData.append("graph_mode", "existing");
              formData.append("graph_id", selectedGraphId.value);
              const selectedGraph = graphStore.graphMetadataList.find((g) => g.id === selectedGraphId.value);
              console.log("ğŸš€ ä¸Šå‚³æª”æ¡ˆè‡³ç¾æœ‰åœ–è­œ:", (selectedGraph == null ? void 0 : selectedGraph.name) || selectedGraphId.value);
            }
            formData.append("enable_ai_link", enableAILink.value ? "true" : "false");
            console.log("ğŸ¤– AI æ™ºèƒ½é€£ç·š:", enableAILink.value ? "å•Ÿç”¨" : "é—œé–‰");
            if (enableAILink.value && selectedDatasetId.value) {
              formData.append("ragflow_dataset_id", selectedDatasetId.value);
              const selectedDataset = ragflowDatasets.value.find((d) => d.id === selectedDatasetId.value);
              console.log("ğŸ“š RAGFlow çŸ¥è­˜åº«:", (selectedDataset == null ? void 0 : selectedDataset.name) || selectedDatasetId.value);
            }
            processingStage.value = "â³ ä¼ºæœå™¨è™•ç†ä¸­ï¼ˆè§£æã€åˆ†æã€å»ºç«‹ç¯€é»ï¼‰...";
            const response = await fetch("/api/system/upload", {
              method: "POST",
              body: formData
            });
            const result = await response.json();
            if (result.success) {
              processingStage.value = "âœ… è™•ç†å®Œæˆï¼";
            } else {
              processingStage.value = "âŒ è™•ç†å¤±æ•—";
            }
            uploadResults.value.push({
              ...result,
              filename: file.name,
              processingProgress: "30%",
              processingStage: "ğŸ“¥ å·²æ¥æ”¶æ–‡ä»¶ï¼Œé–‹å§‹å¾Œå°è™•ç†...",
              stage1Done: false,
              stage2Done: false,
              stage3Done: false
            });
            if (result.success) {
              simulateProcessing(uploadResults.value.length - 1);
            }
          } catch (error) {
            processingStage.value = "âŒ ä¸Šå‚³éŒ¯èª¤";
            uploadResults.value.push({
              success: false,
              filename: file.name,
              error: error.message || "ç¶²è·¯éŒ¯èª¤"
            });
          }
          uploadedCount.value++;
          uploadProgress.value = uploadedCount.value / files.value.length * 100;
          await new Promise((resolve) => setTimeout(resolve, 500));
        }
        uploadStatus.value = "completed";
        currentProcessingFile.value = "";
        processingStage.value = "";
        console.log("âœ… ä¸Šå‚³å®Œæˆï¼Œåˆ·æ–°åœ–è­œæ•¸æ“š...");
        try {
          if (importMode.value === "existing" && selectedGraphId.value) {
            await graphStore.fetchGraphData(selectedGraphId.value);
          } else {
            await graphStore.fetchGraphData(graphStore.currentGraphId);
          }
        } catch (error) {
          console.warn("âš ï¸ åˆ·æ–°åœ–è­œæ•¸æ“šå¤±æ•—:", error);
        }
        ElMessage.success(`âœ… æˆåŠŸä¸Šå‚³ ${files.value.length} å€‹æª”æ¡ˆ`);
        setTimeout(() => {
          files.value = [];
          uploadStatus.value = "ready";
          graphName.value = "";
          selectedGraphId.value = "";
        }, 3e3);
      } catch (error) {
        console.error("âŒ ä¸Šå‚³éŒ¯èª¤:", error);
        ElMessage.error("ä¸Šå‚³å¤±æ•—: " + error.message);
        uploadStatus.value = "ready";
      }
    };
    const getFileIcon = (filename) => {
      const ext = filename.split(".").pop().toLowerCase();
      const icons = {
        pdf: "ğŸ“•",
        docx: "ğŸ“˜",
        xlsx: "ğŸ“Š",
        txt: "ğŸ“„",
        md: "ğŸ“",
        default: "ğŸ“"
      };
      return icons[ext] || icons.default;
    };
    const formatFileSize = (bytes) => {
      if (bytes === 0) return "0 Bytes";
      const k = 1024;
      const sizes = ["Bytes", "KB", "MB", "GB"];
      const i = Math.floor(Math.log(bytes) / Math.log(k));
      return Math.round(bytes / Math.pow(k, i) * 100) / 100 + " " + sizes[i];
    };
    const handleCreateGraph = async () => {
      if (!newGraphData.value.name.trim()) {
        ElMessage.warning("âš ï¸ è«‹è¼¸å…¥åœ–è­œåç¨±");
        return;
      }
      isCreatingGraph.value = true;
      try {
        console.log("ğŸ”„ å‰µå»ºåœ–è­œ:", newGraphData.value);
        const createdGraph = await graphStore.createGraph(newGraphData.value);
        ElMessage.success({
          message: `âœ… åœ–è­œã€Œ${createdGraph.name}ã€å‰µå»ºæˆåŠŸï¼`,
          duration: 3e3
        });
        importMode.value = "new";
        graphName.value = createdGraph.name;
        selectedGraphId.value = createdGraph.id;
        newGraphData.value.icon = createdGraph.icon;
        showCreateGraphDialog.value = false;
        console.log("âœ… åœ–è­œå‰µå»ºå®Œæˆ:", createdGraph);
      } catch (error) {
        console.error("âŒ å‰µå»ºåœ–è­œå¤±æ•—:", error);
        ElMessage.error("å‰µå»ºåœ–è­œå¤±æ•—: " + error.message);
      } finally {
        isCreatingGraph.value = false;
      }
    };
    const closeCreateGraphDialog = () => {
      showCreateGraphDialog.value = false;
      if (!graphName.value) {
        newGraphData.value = {
          name: "",
          description: "",
          icon: "ğŸŒ",
          color: "#3b82f6"
        };
      }
    };
    const simulateProcessing = async (resultIndex) => {
      await new Promise((resolve) => setTimeout(resolve, 2e3));
      if (uploadResults.value[resultIndex]) {
        uploadResults.value[resultIndex].processingProgress = "40%";
        uploadResults.value[resultIndex].processingStage = "ğŸ“„ æ­£åœ¨è§£ææ–‡ä»¶å…§å®¹...";
        uploadResults.value[resultIndex].stage1Done = true;
      }
      await new Promise((resolve) => setTimeout(resolve, 3e3));
      if (uploadResults.value[resultIndex]) {
        uploadResults.value[resultIndex].processingProgress = "70%";
        uploadResults.value[resultIndex].processingStage = "ğŸ§  RAGFlow èªç¾©åˆ†æä¸­...";
        uploadResults.value[resultIndex].stage2Done = true;
      }
      await new Promise((resolve) => setTimeout(resolve, 2e3));
      if (uploadResults.value[resultIndex]) {
        uploadResults.value[resultIndex].processingProgress = "100%";
        uploadResults.value[resultIndex].processingStage = "âœ… åœ–è­œç¯€é»å‰µå»ºå®Œæˆï¼";
        uploadResults.value[resultIndex].stage3Done = true;
      }
    };
    const loadRAGFlowDatasets = async () => {
      try {
        console.log("ğŸ“š æ­£åœ¨åŠ è¼‰ RAGFlow çŸ¥è­˜åº«åˆ—è¡¨...");
        const response = await fetch("/api/ragflow/datasets");
        if (response.ok) {
          const data = await response.json();
          console.log("ğŸ” [DEBUG] API å®Œæ•´å›æ‡‰:", data);
          console.log("ğŸ” [DEBUG] data.code:", data.code);
          console.log("ğŸ” [DEBUG] data.data é¡å‹:", typeof data.data);
          console.log("ğŸ” [DEBUG] data.data æ˜¯å¦ç‚ºé™£åˆ—:", Array.isArray(data.data));
          console.log("ğŸ” [DEBUG] data.data å…§å®¹:", data.data);
          ragflowDatasets.value = data.data || [];
          console.log(`âœ… å·²åŠ è¼‰ ${ragflowDatasets.value.length} å€‹ RAGFlow çŸ¥è­˜åº«`);
          console.log("ğŸ” [DEBUG] ragflowDatasets.value:", ragflowDatasets.value);
          console.log("ğŸ” [DEBUG] JSON æ ¼å¼:", JSON.stringify(ragflowDatasets.value, null, 2));
          if (ragflowDatasets.value.length > 0) {
            console.log("ğŸ“‹ å¯ç”¨çŸ¥è­˜åº«:", ragflowDatasets.value.map((d) => d.name).join(", "));
            console.log("ğŸ” [DEBUG] ç¬¬ä¸€å€‹çŸ¥è­˜åº« id:", ragflowDatasets.value[0].id);
            console.log("ğŸ” [DEBUG] ç¬¬ä¸€å€‹çŸ¥è­˜åº« name:", ragflowDatasets.value[0].name);
          } else {
            console.warn("âš ï¸ [WARNING] ragflowDatasets æ˜¯ç©ºé™£åˆ—ï¼");
          }
        } else {
          console.warn("âš ï¸ RAGFlow API è¿”å›éŒ¯èª¤:", response.status);
        }
      } catch (error) {
        console.error("âŒ ç„¡æ³•é€£æ¥åˆ° RAGFlow æœå‹™:", error);
      }
    };
    onMounted(async () => {
      if (graphStore.graphMetadataList.length === 0) {
        try {
          console.log("ğŸ”„ [ImportPage] è¼‰å…¥åœ–è­œåˆ—è¡¨");
          await graphStore.fetchGraphData(graphStore.currentGraphId);
        } catch (error) {
          console.warn("âš ï¸ [ImportPage] åœ–è­œåˆ—è¡¨è¼‰å…¥å¤±æ•—:", error.message);
        }
      }
      await loadRAGFlowDatasets();
    });
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("div", _hoisted_1, [
        _cache[37] || (_cache[37] = createStaticVNode('<header class="text-center mb-8" data-v-0bf589c2><div class="flex flex-col items-center gap-2" data-v-0bf589c2><h1 class="flex items-center gap-3 m-0 text-4xl font-extrabold text-white" data-v-0bf589c2><span class="text-5xl" data-v-0bf589c2>ğŸ“¥</span><span class="bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent" data-v-0bf589c2>è³‡æ–™å°å…¥å·¥ä½œå°</span></h1><p class="text-sm font-medium text-gray-400 uppercase tracking-widest m-0" data-v-0bf589c2>Data Import Workbench</p></div></header>', 1)),
        createBaseVNode("div", _hoisted_2, [
          _cache[32] || (_cache[32] = createStaticVNode('<div class="mb-6 p-5 bg-blue-900/10 border-2 border-blue-500/30 rounded-2xl" data-v-0bf589c2><div class="flex items-start gap-4" data-v-0bf589c2><span class="text-4xl" data-v-0bf589c2>ğŸ’¡</span><div class="flex-1" data-v-0bf589c2><h3 class="text-xl font-bold text-blue-300 mb-2" data-v-0bf589c2>è‡ªå‹•è™•ç†æµç¨‹</h3><ul class="space-y-2 text-gray-300" data-v-0bf589c2><li class="flex items-center gap-2" data-v-0bf589c2><span class="text-green-500" data-v-0bf589c2>âœ“</span><strong data-v-0bf589c2>ä¸Šå‚³æª”æ¡ˆ</strong> - æ”¯æ´ PDFã€DOCXã€XLSXã€TXTã€MD </li><li class="flex items-center gap-2" data-v-0bf589c2><span class="text-green-500" data-v-0bf589c2>âœ“</span><strong data-v-0bf589c2>è‡ªå‹•ç›£æ§</strong> - WatcherService è‡ªå‹•åµæ¸¬æ–°æª”æ¡ˆ </li><li class="flex items-center gap-2" data-v-0bf589c2><span class="text-green-500" data-v-0bf589c2>âœ“</span><strong data-v-0bf589c2>RAGFlow è™•ç†</strong> - è‡ªå‹•ä¸Šå‚³è‡³ RAGFlow çŸ¥è­˜åº« </li><li class="flex items-center gap-2" data-v-0bf589c2><span class="text-green-500" data-v-0bf589c2>âœ“</span><strong data-v-0bf589c2>åœ–è­œå»ºç«‹</strong> - Excel è‡ªå‹•è§£æä¸¦å‰µå»ºç¯€é»é€£ç·š </li><li class="flex items-center gap-2 mt-3" data-v-0bf589c2><span class="text-blue-500" data-v-0bf589c2>â„¹ï¸</span><span data-v-0bf589c2>ä¸Šå‚³å¾Œç„¡éœ€ä»»ä½•æ“ä½œï¼Œç³»çµ±å°‡è‡ªå‹•å®Œæˆæ‰€æœ‰è™•ç†</span></li></ul></div></div></div>', 1)),
          createBaseVNode("div", _hoisted_3, [
            _cache[26] || (_cache[26] = createBaseVNode("div", { class: "px-8 py-6 bg-gradient-to-r from-blue-500 to-purple-500 border-b border-white/10" }, [
              createBaseVNode("h2", { class: "text-2xl font-bold text-white flex items-center gap-3" }, [
                createBaseVNode("span", { class: "text-3xl" }, "ğŸ“‚"),
                createTextVNode(" ä¸Šå‚³æª”æ¡ˆ ")
              ])
            ], -1)),
            createBaseVNode("div", _hoisted_4, [
              createBaseVNode("div", {
                onDrop: withModifiers(handleDrop, ["prevent"]),
                onDragover: _cache[0] || (_cache[0] = withModifiers(($event) => isDragging.value = true, ["prevent"])),
                onDragleave: _cache[1] || (_cache[1] = withModifiers(($event) => isDragging.value = false, ["prevent"])),
                onClick: triggerFileInput,
                class: normalizeClass(["relative border-4 border-dashed rounded-3xl p-12 transition-all cursor-pointer", [
                  isDragging.value ? "border-blue-500 bg-blue-900/20 scale-105" : "border-[#2d3154] bg-white/5 hover:border-blue-400 hover:bg-blue-900/10",
                  uploadStatus.value === "uploading" ? "pointer-events-none" : ""
                ]])
              }, [
                createBaseVNode("div", _hoisted_5, [
                  createBaseVNode("div", _hoisted_6, [
                    createBaseVNode("span", _hoisted_7, toDisplayString(uploadStatus.value === "ready" ? "ğŸ“" : uploadStatus.value === "uploading" ? "â³" : "âœ…"), 1)
                  ]),
                  createBaseVNode("p", _hoisted_8, toDisplayString(getStatusText()), 1),
                  createBaseVNode("p", _hoisted_9, toDisplayString(getStatusSubtext()), 1),
                  uploadStatus.value === "ready" ? (openBlock(), createElementBlock("div", _hoisted_10, [..._cache[10] || (_cache[10] = [
                    createStaticVNode('<span class="px-4 py-2 bg-blue-900/30 text-blue-300 rounded-lg text-sm font-semibold" data-v-0bf589c2> PDF </span><span class="px-4 py-2 bg-green-900/30 text-green-300 rounded-lg text-sm font-semibold" data-v-0bf589c2> DOCX </span><span class="px-4 py-2 bg-purple-900/30 text-purple-300 rounded-lg text-sm font-semibold" data-v-0bf589c2> XLSX </span><span class="px-4 py-2 bg-yellow-900/30 text-yellow-300 rounded-lg text-sm font-semibold" data-v-0bf589c2> TXT </span><span class="px-4 py-2 bg-red-900/30 text-red-300 rounded-lg text-sm font-semibold" data-v-0bf589c2> MD </span>', 5)
                  ])])) : createCommentVNode("", true)
                ]),
                createBaseVNode("input", {
                  ref_key: "fileInput",
                  ref: fileInput,
                  type: "file",
                  multiple: "",
                  onChange: handleFileSelect,
                  class: "hidden",
                  accept: ".pdf,.txt,.md,.docx,.xlsx"
                }, null, 544)
              ], 34),
              files.value.length > 0 ? (openBlock(), createElementBlock("div", _hoisted_11, [
                createBaseVNode("h3", _hoisted_12, [
                  _cache[11] || (_cache[11] = createBaseVNode("span", null, "ğŸ“‹", -1)),
                  createTextVNode(" å·²é¸æ“‡çš„æª”æ¡ˆ (" + toDisplayString(files.value.length) + ") ", 1)
                ]),
                createBaseVNode("div", _hoisted_13, [
                  (openBlock(true), createElementBlock(Fragment, null, renderList(files.value, (file, index) => {
                    return openBlock(), createElementBlock("div", {
                      key: index,
                      class: "flex items-center justify-between p-4 bg-white/5 border border-[#2d3154] rounded-xl"
                    }, [
                      createBaseVNode("div", _hoisted_14, [
                        createBaseVNode("span", _hoisted_15, toDisplayString(getFileIcon(file.name)), 1),
                        createBaseVNode("div", _hoisted_16, [
                          createBaseVNode("p", _hoisted_17, toDisplayString(file.name), 1),
                          createBaseVNode("p", _hoisted_18, toDisplayString(formatFileSize(file.size)), 1)
                        ])
                      ]),
                      createBaseVNode("button", {
                        onClick: ($event) => removeFile(index),
                        class: "px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors font-semibold"
                      }, " ç§»é™¤ ", 8, _hoisted_19)
                    ]);
                  }), 128))
                ]),
                createBaseVNode("div", _hoisted_20, [
                  _cache[24] || (_cache[24] = createBaseVNode("h3", { class: "text-lg font-bold text-white mb-4 flex items-center gap-2" }, [
                    createBaseVNode("span", null, "ğŸ“‹"),
                    createTextVNode(" å°å…¥æ¨¡å¼ ")
                  ], -1)),
                  createBaseVNode("div", _hoisted_21, [
                    createBaseVNode("button", {
                      onClick: _cache[2] || (_cache[2] = ($event) => showCreateGraphDialog.value = true),
                      class: normalizeClass(["flex-1 px-6 py-4 rounded-xl border-2 transition-all", importMode.value === "new" ? "bg-blue-900/20 border-blue-500 text-blue-300 font-bold" : "bg-white/5 border-[#2d3154] text-gray-400 hover:border-blue-400"])
                    }, [..._cache[12] || (_cache[12] = [
                      createBaseVNode("div", { class: "flex flex-col items-center gap-2" }, [
                        createBaseVNode("span", { class: "text-2xl" }, "âœ¨"),
                        createBaseVNode("span", { class: "text-base" }, "å»ºç«‹æ–°åœ–è­œ")
                      ], -1)
                    ])], 2),
                    createBaseVNode("button", {
                      onClick: _cache[3] || (_cache[3] = ($event) => importMode.value = "existing"),
                      class: normalizeClass(["flex-1 px-6 py-4 rounded-xl border-2 transition-all", importMode.value === "existing" ? "bg-purple-900/20 border-purple-500 text-purple-300 font-bold" : "bg-white/5 border-[#2d3154] text-gray-400 hover:border-purple-400"])
                    }, [..._cache[13] || (_cache[13] = [
                      createBaseVNode("div", { class: "flex flex-col items-center gap-2" }, [
                        createBaseVNode("span", { class: "text-2xl" }, "ğŸ“‚"),
                        createBaseVNode("span", { class: "text-base" }, "åŠ å…¥ç¾æœ‰åœ–è­œ")
                      ], -1)
                    ])], 2)
                  ]),
                  importMode.value === "new" && graphName.value ? (openBlock(), createElementBlock("div", _hoisted_22, [
                    createBaseVNode("div", _hoisted_23, [
                      createBaseVNode("div", _hoisted_24, [
                        createBaseVNode("div", _hoisted_25, [
                          createBaseVNode("span", _hoisted_26, toDisplayString(newGraphData.value.icon || "ğŸŒ"), 1),
                          createBaseVNode("div", null, [
                            createBaseVNode("p", _hoisted_27, toDisplayString(graphName.value), 1),
                            _cache[14] || (_cache[14] = createBaseVNode("p", { class: "text-sm text-blue-400" }, "æ–°å»ºåœ–è­œ", -1))
                          ])
                        ]),
                        createBaseVNode("button", {
                          onClick: _cache[4] || (_cache[4] = ($event) => showCreateGraphDialog.value = true),
                          class: "px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-semibold transition-colors text-sm"
                        }, " âœï¸ ç·¨è¼¯ ")
                      ])
                    ])
                  ])) : createCommentVNode("", true),
                  importMode.value === "existing" ? (openBlock(), createElementBlock("div", _hoisted_28, [
                    _cache[16] || (_cache[16] = createBaseVNode("label", { class: "block text-sm font-bold text-purple-300 mb-2" }, " ğŸ“‚ é¸æ“‡åœ–è­œ ", -1)),
                    withDirectives(createBaseVNode("select", {
                      "onUpdate:modelValue": _cache[5] || (_cache[5] = ($event) => selectedGraphId.value = $event),
                      class: "w-full px-4 py-3 bg-white/5 border-2 border-purple-500/50 rounded-xl text-base text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all"
                    }, [
                      _cache[15] || (_cache[15] = createBaseVNode("option", {
                        value: "",
                        disabled: ""
                      }, "è«‹é¸æ“‡è¦åŠ å…¥çš„åœ–è­œ...", -1)),
                      (openBlock(true), createElementBlock(Fragment, null, renderList(unref(graphStore).graphMetadataList, (graph) => {
                        return openBlock(), createElementBlock("option", {
                          key: graph.id,
                          value: graph.id
                        }, toDisplayString(graph.name) + " (ç¯€é»æ•¸: " + toDisplayString(graph.nodeCount || 0) + ") ", 9, _hoisted_29);
                      }), 128))
                    ], 512), [
                      [vModelSelect, selectedGraphId.value]
                    ]),
                    _cache[17] || (_cache[17] = createBaseVNode("p", { class: "mt-2 text-sm text-purple-400" }, " ğŸ’¡ æ•¸æ“šå°‡åŠ å…¥åˆ°æ‰€é¸çš„ç¾æœ‰åœ–è­œä¸­ ", -1))
                  ])) : createCommentVNode("", true),
                  createBaseVNode("div", _hoisted_30, [
                    createBaseVNode("div", _hoisted_31, [
                      _cache[18] || (_cache[18] = createBaseVNode("div", { class: "flex items-center gap-3" }, [
                        createBaseVNode("span", { class: "text-3xl" }, "ğŸ¤–"),
                        createBaseVNode("div", null, [
                          createBaseVNode("p", { class: "font-bold text-emerald-300 text-base" }, "AI æ™ºèƒ½é€£ç·š"),
                          createBaseVNode("p", { class: "text-sm text-emerald-400" }, "è‡ªå‹•åˆ†æä¸¦å»ºç«‹ç¯€é»é–“çš„é—œè¯æ€§")
                        ])
                      ], -1)),
                      createBaseVNode("button", {
                        onClick: _cache[6] || (_cache[6] = ($event) => enableAILink.value = !enableAILink.value),
                        class: normalizeClass(["relative inline-flex h-8 w-16 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2", enableAILink.value ? "bg-emerald-500" : "bg-gray-600"])
                      }, [
                        createBaseVNode("span", {
                          class: normalizeClass(["inline-block h-6 w-6 transform rounded-full bg-white shadow-lg transition-transform", enableAILink.value ? "translate-x-9" : "translate-x-1"])
                        }, null, 2)
                      ], 2)
                    ]),
                    enableAILink.value ? (openBlock(), createElementBlock("p", _hoisted_32, [..._cache[19] || (_cache[19] = [
                      createBaseVNode("span", null, "âœ¨", -1),
                      createBaseVNode("span", null, "å•Ÿç”¨å¾Œï¼Œç³»çµ±å°‡ä½¿ç”¨ AI åˆ†æç¯€é»å…§å®¹ï¼Œè‡ªå‹•å»ºè­°ä¸¦å‰µå»ºç›¸é—œé€£ç·šï¼Œæå‡åœ–è­œçµæ§‹çš„å®Œæ•´æ€§", -1)
                    ])])) : (openBlock(), createElementBlock("p", _hoisted_33, [..._cache[20] || (_cache[20] = [
                      createBaseVNode("span", null, "â„¹ï¸", -1),
                      createBaseVNode("span", null, "é—œé–‰ AI é€£ç·šåŠŸèƒ½ï¼Œåƒ…æ ¹æ“šç¾æœ‰æ•¸æ“šå»ºç«‹åŸºç¤é—œä¿‚", -1)
                    ])])),
                    enableAILink.value ? (openBlock(), createElementBlock("div", _hoisted_34, [
                      _cache[22] || (_cache[22] = createBaseVNode("label", { class: "block text-sm font-bold text-purple-300 mb-2" }, " ğŸ“š RAGFlow çŸ¥è­˜åº« ", -1)),
                      withDirectives(createBaseVNode("select", {
                        "onUpdate:modelValue": _cache[7] || (_cache[7] = ($event) => selectedDatasetId.value = $event),
                        class: "w-full px-4 py-2 bg-[#1a1d3a] border-2 border-purple-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 text-gray-200"
                      }, [
                        _cache[21] || (_cache[21] = createBaseVNode("option", { value: "" }, "ä¸ä½¿ç”¨ RAGFlowï¼ˆåƒ…æœ¬åœ°è™•ç†ï¼‰", -1)),
                        (openBlock(true), createElementBlock(Fragment, null, renderList(ragflowDatasets.value, (dataset) => {
                          return openBlock(), createElementBlock("option", {
                            key: dataset.id,
                            value: dataset.id
                          }, toDisplayString(dataset.name), 9, _hoisted_35);
                        }), 128))
                      ], 512), [
                        [vModelSelect, selectedDatasetId.value]
                      ]),
                      _cache[23] || (_cache[23] = createBaseVNode("p", { class: "mt-2 text-xs text-purple-400" }, " é¸æ“‡çŸ¥è­˜åº«å¾Œï¼Œæ–‡æª”å°‡åŒæ™‚ä¸Šå‚³åˆ° RAGFlow é€²è¡Œæ·±åº¦èªç¾©åˆ†æ ", -1))
                    ])) : createCommentVNode("", true)
                  ])
                ]),
                createBaseVNode("div", _hoisted_36, [
                  createBaseVNode("button", {
                    onClick: uploadFiles,
                    disabled: uploadStatus.value === "uploading",
                    class: "flex-1 px-8 py-4 bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 disabled:from-gray-400 disabled:to-gray-500 text-white rounded-xl transition-all font-bold text-lg shadow-lg disabled:cursor-not-allowed"
                  }, [
                    uploadStatus.value !== "uploading" ? (openBlock(), createElementBlock("span", _hoisted_38, "ğŸš€ é–‹å§‹ä¸Šå‚³")) : (openBlock(), createElementBlock("span", _hoisted_39, "â³ ä¸Šå‚³ä¸­... (" + toDisplayString(uploadedCount.value) + "/" + toDisplayString(files.value.length) + ")", 1))
                  ], 8, _hoisted_37),
                  createBaseVNode("button", {
                    onClick: clearFiles,
                    disabled: uploadStatus.value === "uploading",
                    class: "px-8 py-4 bg-gray-500 hover:bg-gray-600 disabled:bg-gray-400 text-white rounded-xl transition-colors font-bold text-lg disabled:cursor-not-allowed"
                  }, " æ¸…ç©ºåˆ—è¡¨ ", 8, _hoisted_40)
                ])
              ])) : createCommentVNode("", true),
              uploadStatus.value === "uploading" ? (openBlock(), createElementBlock("div", _hoisted_41, [
                createBaseVNode("div", _hoisted_42, [
                  createBaseVNode("div", {
                    class: "bg-gradient-to-r from-blue-500 to-purple-500 h-full transition-all duration-300",
                    style: normalizeStyle({ width: `${uploadProgress.value}%` })
                  }, null, 4)
                ]),
                createBaseVNode("div", _hoisted_43, [
                  createBaseVNode("p", _hoisted_44, " ä¸Šå‚³é€²åº¦: " + toDisplayString(uploadProgress.value.toFixed(0)) + "% (" + toDisplayString(uploadedCount.value) + "/" + toDisplayString(files.value.length) + ") ", 1),
                  currentProcessingFile.value ? (openBlock(), createElementBlock("div", _hoisted_45, [
                    _cache[25] || (_cache[25] = createBaseVNode("span", { class: "animate-spin" }, "âš™ï¸", -1)),
                    createBaseVNode("span", _hoisted_46, toDisplayString(currentProcessingFile.value), 1)
                  ])) : createCommentVNode("", true),
                  processingStage.value ? (openBlock(), createElementBlock("div", _hoisted_47, toDisplayString(processingStage.value), 1)) : createCommentVNode("", true)
                ])
              ])) : createCommentVNode("", true)
            ])
          ]),
          uploadResults.value.length > 0 ? (openBlock(), createElementBlock("div", _hoisted_48, [
            createBaseVNode("div", _hoisted_49, [
              _cache[31] || (_cache[31] = createBaseVNode("div", { class: "px-8 py-6 bg-gradient-to-r from-green-500 to-teal-500 border-b border-white/10" }, [
                createBaseVNode("h2", { class: "text-2xl font-bold text-white flex items-center gap-3" }, [
                  createBaseVNode("span", { class: "text-3xl" }, "âœ…"),
                  createTextVNode(" ä¸Šå‚³çµæœ ")
                ])
              ], -1)),
              createBaseVNode("div", _hoisted_50, [
                (openBlock(true), createElementBlock(Fragment, null, renderList(uploadResults.value, (result, index) => {
                  return openBlock(), createElementBlock("div", {
                    key: index,
                    class: normalizeClass(["p-4 rounded-xl border-2", result.success ? "bg-green-900/10 border-green-500/30" : "bg-red-900/10 border-red-500/30"])
                  }, [
                    createBaseVNode("div", _hoisted_51, [
                      createBaseVNode("span", _hoisted_52, toDisplayString(result.success ? "âœ…" : "âŒ"), 1),
                      createBaseVNode("div", _hoisted_53, [
                        createBaseVNode("p", {
                          class: normalizeClass(["font-bold", result.success ? "text-green-300" : "text-red-300"])
                        }, toDisplayString(result.filename), 3),
                        createBaseVNode("p", {
                          class: normalizeClass(["text-sm", result.success ? "text-green-400" : "text-red-400"])
                        }, toDisplayString(result.message || result.error), 3),
                        result.success && result.saved_path ? (openBlock(), createElementBlock("p", _hoisted_54, " å„²å­˜è·¯å¾‘: " + toDisplayString(result.saved_path), 1)) : createCommentVNode("", true),
                        result.success && uploadStatus.value === "completed" ? (openBlock(), createElementBlock("div", _hoisted_55, [
                          createBaseVNode("div", _hoisted_56, [
                            createBaseVNode("div", {
                              class: "h-full bg-gradient-to-r from-blue-500 to-purple-500 transition-all duration-500",
                              style: normalizeStyle({ width: result.processingProgress || "30%" })
                            }, null, 4)
                          ]),
                          createBaseVNode("div", _hoisted_57, [
                            _cache[27] || (_cache[27] = createBaseVNode("span", { class: "animate-spin text-blue-500" }, "âš™ï¸", -1)),
                            createBaseVNode("span", _hoisted_58, toDisplayString(result.processingStage || "ğŸ“¥ å·²æ¥æ”¶æ–‡ä»¶ï¼Œç­‰å¾…è™•ç†..."), 1)
                          ]),
                          createBaseVNode("div", _hoisted_59, [
                            createBaseVNode("div", _hoisted_60, [
                              createBaseVNode("span", null, toDisplayString(result.stage1Done ? "âœ…" : "â³"), 1),
                              _cache[28] || (_cache[28] = createBaseVNode("span", null, "æ–‡ä»¶è§£æèˆ‡å…§å®¹æå–", -1))
                            ]),
                            createBaseVNode("div", _hoisted_61, [
                              createBaseVNode("span", null, toDisplayString(result.stage2Done ? "âœ…" : "â³"), 1),
                              _cache[29] || (_cache[29] = createBaseVNode("span", null, "RAGFlow èªç¾©åˆ†æ", -1))
                            ]),
                            createBaseVNode("div", _hoisted_62, [
                              createBaseVNode("span", null, toDisplayString(result.stage3Done ? "âœ…" : "â³"), 1),
                              _cache[30] || (_cache[30] = createBaseVNode("span", null, "åœ–è­œç¯€é»å‰µå»ºèˆ‡é€£ç·š", -1))
                            ])
                          ])
                        ])) : createCommentVNode("", true)
                      ])
                    ])
                  ], 2);
                }), 128))
              ])
            ])
          ])) : createCommentVNode("", true)
        ]),
        showCreateGraphDialog.value ? (openBlock(), createElementBlock("div", {
          key: 0,
          class: "fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",
          onClick: withModifiers(closeCreateGraphDialog, ["self"])
        }, [
          createBaseVNode("div", _hoisted_63, [
            createBaseVNode("div", _hoisted_64, [
              createBaseVNode("h2", _hoisted_65, [
                _cache[33] || (_cache[33] = createBaseVNode("span", { class: "text-4xl" }, "âœ¨", -1)),
                createTextVNode(" " + toDisplayString(graphName.value ? "ç·¨è¼¯åœ–è­œè³‡è¨Š" : "å‰µå»ºæ–°åœ–è­œ"), 1)
              ]),
              createBaseVNode("button", {
                onClick: closeCreateGraphDialog,
                class: "text-gray-400 hover:text-gray-200 text-3xl leading-none transition-colors"
              }, " Ã— ")
            ]),
            createBaseVNode("div", _hoisted_66, [
              createBaseVNode("div", null, [
                _cache[34] || (_cache[34] = createBaseVNode("label", { class: "block text-sm font-bold text-gray-300 mb-2" }, " ğŸ“ åœ–è­œåç¨± * ", -1)),
                withDirectives(createBaseVNode("input", {
                  "onUpdate:modelValue": _cache[8] || (_cache[8] = ($event) => newGraphData.value.name = $event),
                  type: "text",
                  placeholder: "ä¾‹å¦‚ï¼šç”¢å“è¦åŠƒã€æŠ€è¡“æ–‡æª”ã€æœƒè­°è¨˜éŒ„...",
                  class: "w-full px-4 py-3 bg-white/5 border-2 border-[#2d3154] rounded-xl text-base text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"
                }, null, 512), [
                  [vModelText, newGraphData.value.name]
                ])
              ]),
              createBaseVNode("div", null, [
                _cache[35] || (_cache[35] = createBaseVNode("label", { class: "block text-sm font-bold text-gray-300 mb-2" }, " ğŸ“„ åœ–è­œæè¿° ", -1)),
                withDirectives(createBaseVNode("textarea", {
                  "onUpdate:modelValue": _cache[9] || (_cache[9] = ($event) => newGraphData.value.description = $event),
                  rows: "3",
                  placeholder: "ç°¡å–®æè¿°é€™å€‹åœ–è­œçš„ç”¨é€”å’Œå…§å®¹...",
                  class: "w-full px-4 py-3 bg-white/5 border-2 border-[#2d3154] rounded-xl text-base text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all resize-none"
                }, null, 512), [
                  [vModelText, newGraphData.value.description]
                ])
              ]),
              createBaseVNode("div", null, [
                _cache[36] || (_cache[36] = createBaseVNode("label", { class: "block text-sm font-bold text-gray-300 mb-2" }, " ğŸ¨ é¸æ“‡åœ–ç¤º ", -1)),
                createBaseVNode("div", _hoisted_67, [
                  (openBlock(), createElementBlock(Fragment, null, renderList(availableIcons, (icon) => {
                    return createBaseVNode("button", {
                      key: icon,
                      onClick: ($event) => newGraphData.value.icon = icon,
                      class: normalizeClass(["aspect-square flex items-center justify-center text-3xl rounded-xl border-2 transition-all hover:scale-110", newGraphData.value.icon === icon ? "border-blue-500 bg-blue-900/20 shadow-lg" : "border-[#2d3154] bg-white/5 hover:border-blue-400"])
                    }, toDisplayString(icon), 11, _hoisted_68);
                  }), 64))
                ])
              ]),
              createBaseVNode("div", _hoisted_69, [
                createBaseVNode("button", {
                  onClick: handleCreateGraph,
                  disabled: !newGraphData.value.name.trim() || isCreatingGraph.value,
                  class: "flex-1 px-6 py-4 bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 disabled:from-gray-400 disabled:to-gray-500 text-white rounded-xl font-bold text-lg transition-all shadow-lg disabled:cursor-not-allowed"
                }, [
                  !isCreatingGraph.value ? (openBlock(), createElementBlock("span", _hoisted_71, "âœ¨ å‰µå»ºåœ–è­œ")) : (openBlock(), createElementBlock("span", _hoisted_72, "â³ å‰µå»ºä¸­..."))
                ], 8, _hoisted_70),
                createBaseVNode("button", {
                  onClick: closeCreateGraphDialog,
                  disabled: isCreatingGraph.value,
                  class: "px-6 py-4 bg-gray-500 hover:bg-gray-600 disabled:bg-gray-400 text-white rounded-xl font-bold text-lg transition-colors disabled:cursor-not-allowed"
                }, " å–æ¶ˆ ", 8, _hoisted_73)
              ])
            ])
          ])
        ])) : createCommentVNode("", true)
      ]);
    };
  }
};
const ImportPage = /* @__PURE__ */ _export_sfc(_sfc_main, [["__scopeId", "data-v-0bf589c2"]]);
export {
  ImportPage as default
};
